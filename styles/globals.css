/* ================================
   Variables globales
   ================================ */
:root {
  /* Couleurs de fond (surchargées par JSON) */
  --color-header: #1F1F1F;
  --color-main:   #2E2E2E;
  --color-footer: #1A1A1A;

  /* Couleurs de texte (surchargées par JSON) */
  --text-header: #FFFFFF;
  --text-main:   #FFFFFF;
  --text-footer: #FFFFFF;

  /* Hauteurs header/footer */
  --header-h: 10svh;
  --footer-h: 10svh;

  /* Hauteur des contrôles (lang, boutons, flèches) */
  --control-h: clamp(28px, calc(var(--header-h) - 14px), 40px);

  /* Divers */
  --radius-sm: 8px;
  --pad-x: .55rem;  /* padding horizontal des boutons */
  --gap: .5rem;
}

* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; padding: 0; }
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

/* ================================
   Header & Footer fixes
   ================================ */
.site-header, .site-footer {
  position: fixed; left: 0; right: 0; z-index: 999;
  display: flex; align-items: center; justify-content: space-between;
  padding: .5rem .75rem;
}

.site-header {
  top: 0;
  height: var(--header-h);
  background: var(--color-header);
  color: var(--text-header);
  overflow: hidden;
}
.site-footer {
  bottom: 0;
  height: var(--footer-h);
  background: var(--color-footer);
  color: var(--text-footer);
}

.site-header .left  { flex: 1 1 auto; min-width: 0; }
.site-header .right { flex: 0 1 auto; display: flex; align-items: center; gap: var(--gap); }

.site-footer .side   { display: flex; align-items: center; gap: .75rem; }
.site-footer .center { display: flex; align-items: center; gap: 1rem; }

/* ================================
   Zone principale
   ================================ */
.site-main {
  position: absolute; top: var(--header-h); bottom: var(--footer-h); left: 0; right: 0;
  overflow-y: auto; overflow-x: hidden;
  background: var(--color-main);
  color: var(--text-main);
  padding: 1rem;
}

/* ================================
   Contrôles harmonisés
   ================================ */
/* Liens héritent toujours de la couleur courante */
a, a:visited, a:active, a:hover { color: inherit; text-decoration: none; }

/* Boutons génériques (Search, Login, Home, TOC) */
.btn{
  display: inline-flex; align-items: center; justify-content: center;
  height: var(--control-h);
  line-height: var(--control-h);
  padding: 0 var(--pad-x);
  border-radius: var(--radius-sm);
  border: 1px solid rgba(255,255,255,.25);
  background: transparent;
  color: inherit;
  font-weight: 600; font-size: .95rem;
  white-space: nowrap;
}
.site-header .btn:hover { background: rgba(255,255,255,.12); }
.site-footer .btn:hover { background: rgba(255,255,255,.12); }

/* Sélecteur de langues */
.lang{
  height: var(--control-h);
  line-height: var(--control-h);
  padding: 0 var(--pad-x);
  border-radius: var(--radius-sm);
  border: 1px solid rgba(255,255,255,.25);
  background: transparent;
  color: inherit;
  text-align: center;
  appearance: none; /* style neutre */
}

/* Flèches de navigation (carré = même hauteur/largeur) */
.nav{
  display: inline-flex; align-items: center; justify-content: center;
  width: var(--control-h); height: var(--control-h); line-height: var(--control-h);
  border: 1px solid rgba(255,255,255,.25);
  border-radius: var(--radius-sm);
  background: transparent;
  color: inherit;
  font-size: 1.05rem;
}
.nav:hover { background: rgba(255,255,255,.12); }

/* Badge auteur (initiales) */
.author {
  display: inline-flex; align-items: center; justify-content: center;
  height: var(--control-h);
  padding: 0 .5rem;
  border-radius: var(--radius-sm);
  border: 1px solid rgba(255,255,255,.25);
  background: transparent;
  color: inherit;
  font-weight: 700; letter-spacing: .08em; text-transform: uppercase;
}

/* Indicateur position x/N */
.pos{
  display: inline-flex; align-items: center; justify-content: center;
  height: var(--control-h);
  padding: 0 .5rem;
  border-radius: var(--radius-sm);
  color: inherit; opacity: .9;
}

/* ================================
   Logo responsive
   ================================ */
/* Largeur dynamique et plafonnée, sans dépasser la hauteur du header */
.logo{
  width: clamp(96px, 25vw, 240px);
  height: auto;
  max-height: calc(var(--header-h) - 12px);
  object-fit: contain;
  display: block;
}

@media (max-width: 380px){
  .logo{ width: clamp(88px, 28vw, 200px); }
  .site-header .right{ gap: .3rem; }
}
@media (max-width: 330px){
  .logo{ width: clamp(80px, 30vw, 180px); }
  .site-header .btn, .site-header .lang{ padding: 0 .35rem; font-size: 12px; }
}

/* ================================
   Médias responsives
   ================================ */
.media-responsive,
.site-main img,
.site-main video,
.site-main iframe {
  max-width: 100%;
  height: auto !important;
  /* width: auto !important; */
  max-height: calc(100dvh - var(--header-h) - var(--footer-h) - 2rem);
  display: block;
  margin: .5rem auto;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,.1);
  object-fit: contain;
}

/* ================================
   Contenu WordPress / Gutenberg
   ================================ */
.site-main article, .site-main article * { color: inherit; }

/* Titres + alignements Gutenberg */
.site-main h1, .site-main h2, .site-main h3,
.site-main h4, .site-main h5, .site-main h6 {
  margin: 0.8rem 0 0.5rem; line-height: 1.2;
}
.site-main .has-text-align-left   { text-align: left; }
.site-main .has-text-align-center { text-align: center; }
.site-main .has-text-align-right  { text-align: right; }

/* Paragraphes */
.site-main p { margin: 0.6rem 0; }

/* Alignements legacy */
.site-main .alignleft  { float: left;  margin: 0.2rem 1rem 0.2rem 0; }
.site-main .alignright { float: right; margin: 0.2rem 0 0.2rem 1rem; }
.site-main .aligncenter,
.site-main img.aligncenter,
.site-main figure.aligncenter { display: block; margin-left: auto; margin-right: auto; }

/* Images / figures */
.site-main img { max-width: 100%; height: auto; display: block; }
.site-main figure { margin: 0.8rem 0; }
.site-main figcaption { font-size: 0.9rem; opacity: 0.8; margin-top: 0.25rem; }

/* Blocks sans fonds opaques */
.site-main .wp-block-cover,
.site-main .wp-block-group,
.site-main .wp-block-columns,
.site-main .wp-block-column {
  background: transparent !important;
}

/* Colonnes Gutenberg */
.site-main .wp-block-columns { display: grid; gap: 1rem; }
@media (min-width: 768px) {
  .site-main .wp-block-columns { grid-auto-flow: column; grid-auto-columns: 1fr; }
}

/* Listes */
.site-main ul, .site-main ol { margin: 0.6rem 1.25rem; }
.site-main li { margin: 0.25rem 0; }

/* Blockquote / Pullquote */
.site-main blockquote {
  border-left: 3px solid currentColor;
  padding-left: 0.75rem;
  margin: 0.8rem 0; opacity: 0.95;
}
.site-main .wp-block-pullquote {
  border-left: none;
  border-top: 1px solid currentColor;
  border-bottom: 1px solid currentColor;
  padding: 0.75rem 0; text-align: center;
}

/* Code / Pre */
.site-main code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
.site-main pre {
  overflow: auto; padding: 0.75rem;
  border: 1px solid rgba(255,255,255,0.15); border-radius: 8px;
}

/* Tables responsive */
.site-main .table-wrap { overflow-x: auto; }
.site-main table {
  width: 100%; border-collapse: collapse; margin: 0.75rem 0;
}
.site-main th, .site-main td {
  border: 1px solid rgba(255,255,255,0.15); padding: 0.5rem;
}

/* Embeds (YouTube, Vimeo, iframes…) */
.embed-responsive {
  position: relative; width: 100%; height: auto; aspect-ratio: 16 / 9;
  overflow: hidden; border-radius: 8px; margin: 0.75rem 0;
}
.embed-responsive > iframe,
.embed-responsive > video,
.embed-responsive > embed,
.embed-responsive > object { width: 100%; height: 100%; display: block; }

/* Galleries */
.site-main .wp-block-gallery { display: grid; gap: 0.5rem; }
@media (min-width: 640px) { .site-main .wp-block-gallery { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 1024px){ .site-main .wp-block-gallery { grid-template-columns: repeat(3, 1fr); } }
.site-main .wp-block-gallery img { width: 100%; height: auto; display: block; }

/* Clear floats */
.site-main::after { content: ""; display: table; clear: both; }

/* Swipe vertical naturel */
.swipeable { touch-action: pan-y; }

/* ================================
   Modal <dialog>
   ================================ */
.modal { border: none; padding: 0; background: transparent; max-width: unset; }
.modal::backdrop { background: rgba(0,0,0,.55); backdrop-filter: blur(2px); }
.modal-card {
  width: min(96vw, 1100px); max-height: 90dvh;
  background: #111; color: #fff; border-radius: 12px; overflow: hidden;
  border: 1px solid rgba(255,255,255,.15); box-shadow: 0 10px 40px rgba(0,0,0,.6);
}
.modal-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: .75rem 1rem; background: #1c1c1c;
  border-bottom: 1px solid rgba(255,255,255,.12);
}
.modal-title { margin: 0; font-size: 1rem; font-weight: 600; }
.modal-close {
  appearance: none; border: none; background: #333; color: #fff;
  border-radius: 8px; width: 36px; height: 32px; cursor: pointer;
}
.modal-close:hover { background: #444; }
.modal-body { background: #0f0f0f; padding: 0; }
.modal-body iframe {
  display: block; width: 100%; height: min(78dvh, 800px); border: none; background: #fff;
}
.modal-fallback {
  padding: .5rem .75rem; background: #1c1c1c;
  border-top: 1px solid rgba(255,255,255,.12); text-align: right;
}
.modal-fallback a { color: #9ad; text-decoration: underline; }

/* ================================
   Accessibilité (hover clair en mode light)
   ================================ */
@media (prefers-color-scheme: light) {
  .btn:hover, .author:hover, .nav:hover,
  .btn:focus-visible, .author:focus-visible, .nav:focus-visible {
    background: rgba(0,0,0,0.08);
  }
}

/* 1. Centrer tous les titres */
h1, h2, h3, h4, h5, h6 {
  text-align: center;
}

/* 2. Centrer les galeries d'images */
.wp-block-gallery {
  display: flex;
  justify-content: center;
  flex-wrap: wrap; /* permet de passer à la ligne */
  gap: 10px; /* espace entre images */
}

.wp-block-gallery img {
  max-width: 100%;
  height: auto;
}

/* 3. Centrer les captions */
figcaption,
.wp-element-caption {
  text-align: center;
  font-style: italic;
  margin-top: 0.3em;
}

/* 4. Style des blocs "Quote" */
blockquote {
  font-family: "Georgia", "Times New Roman", serif;
  font-size: 1.2em;
  font-style: italic;
  border-left: 4px solid #555;
  margin: 1.5em auto;
  padding: 0.8em 1.2em;
  max-width: 800px;
  background: #f9f9f9;
}

/* 📱 Responsive design */
@media (max-width: 768px) {
  h1 { font-size: 1.6em; }
  h2 { font-size: 1.4em; }
  h3 { font-size: 1.2em; }
  h4, h5, h6 { font-size: 1.1em; }

  blockquote {
    font-size: 1em;
    padding: 0.6em 1em;
    margin: 1em auto;
  }

  .wp-block-gallery {
    gap: 6px;
  }
}

@media (max-width: 480px) {
  h1 { font-size: 1.4em; }
  h2 { font-size: 1.2em; }
  h3 { font-size: 1.1em; }
  h4, h5, h6 { font-size: 1em; }

  blockquote {
    font-size: 0.95em;
    border-left: 3px solid #777;
  }
}

/* Tabs ML - styles */
[role="tab"].is-active,
[role="tab"][aria-selected="true"] {
  background: #90D5FF;
  color: #fff;
  border-color: #90D5FF;
}
[role="tabpanel"][hidden] {
  display: none !important;
}

